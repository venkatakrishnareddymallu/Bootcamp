!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.g1=e.g1||{})}(this,function(e){"use strict";var v={null:{null:{state:"null"},date:{state:"date"},number:{state:"number"},boolean:{state:"boolean"},string:{state:"string"},object:{state:"object"},mixed:{state:"mixed",end:!0}},date:{null:{state:"date"},undefined:{state:"date"},date:{state:"date"},default:{state:"mixed",end:!0}},number:{null:{state:"number"},undefined:{state:"number"},number:{state:"number"},default:{state:"mixed",end:!0}},boolean:{null:{state:"boolean"},undefined:{state:"boolean"},boolean:{state:"boolean"},default:{state:"mixed",end:!0}},string:{null:{state:"string"},undefined:{state:"string"},string:{state:"string"},default:{state:"mixed",end:!0}},object:{null:{state:"object"},object:{state:"object"},undefined:{state:"object"},default:{state:"mixed",end:!0}},mixed:{default:{state:"mixed",end:!0}}};function n(e,t,n){return e?-1!=e.indexOf(t)?!n:n:n?null==t:null!=t}function r(e,t,n){return isNaN(t)&&Date.parse(t)&&(t=Date.parse(t)),isNaN(e)&&Date.parse(e)&&(e=Date.parse(e)),n?e<=t:e<t}var m={"=":function(e,t){return n(e,t,!1)},"!":function(e,t){return n(e,t,!0)},">":function(e,t){return r(e,t,!1)},"<":function(e,t){return r(t,e,!1)},">~":function(e,t){return r(e,t,!0)},"<~":function(e,t){return r(t,e,!0)},"~":function(e,t){return n(t,e[0],!1)},"!~":function(e,t){return n(t,e[0],!0)}},p={string:function(e,t,n){return n||(n="asc"),"desc"==n&&(e=[t,t=e][0]),e.localeCompare(t)},number:function(e,t,n){return n||(n="asc"),"desc"==n&&(e=[t,t=e][0]),e-t}};e.version="0.16.2",e.datafilter=function(e,t,n){var r,a,i=e;t=function(e,t){if(!t)return e;var n={};for(var r in e){var a=r.split(":");1==a.length?n[a[0]]=e[r]:a[0]===t&&(n[a[1]]=e[r])}return n}(t=t||[],n);var u=function(e,t){var n={};if(!e||!e.length)return n;(t=t||{}).convert=t.convert||!1,t.limit=t.limit||1e3;for(var r=t.limit<e.length?t.limit:e.length,a=t.ignore=t.ignore||[null,void 0],i=Object.keys(e[0]),u=0;u<i.length;u++){for(var o=i[u],s="null",f=0;f<r;f++){var l=e[f],c=l[o];if(0==u&&Object.keys(e[f]).forEach(function(e){-1==i.indexOf(e)&&i.push(e)}),o in l&&!(0<=a.indexOf(c))){var d=typeof c;null==c?d="null":"object"!=d||isNaN(Date.parse(c))?t.convert&&(!isNaN(parseFloat(c))&&isFinite(c)||0<=["NaN","Infinity","-Infinity"].indexOf(c)?d="number":isNaN(Date.parse(c))?-1!=["true","false"].indexOf(c)&&(d="boolean"):d="date"):d="date";var b=v[d],m=b[s]||b.default;if(s=m.state,m.end)break}}n[o]=s}return n}(e,{convert:!0});for(var o in t)if("_"!=o[0]){var s=o.match(/(!|>|>~|<|<~|~|!~)$/)?o.match(/(!|>|>~|<|<~|~|!~)$/).index:o.length;r=""!=o.slice(s)?o.slice(s):"=",a=""!=t[o][0]?t[o]:null;var f=o.slice(0,s);"number"==u[f]?a=a.map(function(e){return parseFloat(e)}):"boolean"==u[f]?a=a.map(function(e){return"true"==String(e)}):"date"==u[f]&&(a=a.map(function(e){return Date.parse(e)})),i=i.filter(function(e){return void 0===e[f]||m[r](a,e[f])})}var l=parseInt(t._offset)||0,c=parseInt(t._limit)||1e3;if(i=i.slice(l,l+c),t._c){var d=[],b=[];t._c.forEach(function(e){"-"==e[0]?d.push(e.slice(1)):b.push(e)}),i=i.map(function(e){return function(t,e,n){0==e.length&&(e=Object.keys(t));var r={};return e.forEach(function(e){n.indexOf(e)<0&&(r[e]=t[e])}),r}(e,b,d)})}return t._sort&&i.sort(function(r,a){var i=!1;return t._sort.forEach(function(e){var t="-"==e[0]?"desc":"asc";if("-"==e[0]&&(e=e.substr(1)),void 0!==r[e]){var n=isNaN(r[e])?"string":"number";i=i||p[n](r[e],a[e],t)}}),i}),i},Object.defineProperty(e,"__esModule",{value:!0})});
