!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.g1=e.g1||{})}(this,function(e){"use strict";var y=["href","protocol","origin","userinfo","username","password","hostname","port","relative","pathname","directory","file","search","hash"],m=["searchKey","searchList"],a=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,s=/(?:^|&)([^&=]*)=?([^&]*)/g,h=function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))},j=encodeURIComponent;function v(e){for(var t={toString:u,join:f,update:l},r=a.exec(e||""),n=14;n--;)t[y[n]]=r[n]||"";var i=t[m[0]]={},o=t[m[1]]={};return t[y[12]].replace(s,function(e,t,r){t&&(t=h(t),r=h(r),i[t]=r,o[t]=o[t]||[],o[t].push(r))}),t}function u(e){var t,r,n,i,o=(e=e||this)[y[1]]||"http",a=e[y[4]],s=e[y[5]],h=e[y[6]],u=e[y[7]],f=e[y[9]],l=e[y[12]],p=e[y[13]],c=e[m[0]],d=e[m[1]],g=h?[o,"://"]:[],v=[];if(a&&(g.push(a),s&&g.push(":",s),g.push("@")),g.push(h),u&&g.push(":",u),g.push(f||(h?"/":"")),l)g.push("?",l);else{if(d)for(t in d){for(n=0,i=(r=d[t]).length;n<i;n++)v.push(j(t)+"="+j(r[n]));i||v.push(t)}else if(c)for(t in c)v.push(j(t)+"="+j(c[t]));v.length&&g.push("?",v.join("&"))}return p&&g.push("#",p),g.join("")}function f(e,t){t=t||{};var r,n,i=this,o=i[y[9]].split("/"),a=o.length-1,s=v(e),h=s.pathname.split("/"),u=h.length;for(void 0===t.query&&(t.query=!0),void 0===t.hash&&(t.hash=!0),r=0;r<14;r++)9!=r&&(12!=r||t.query)&&(13!=r||t.hash)&&s[y[r]]&&(i[y[r]]=s[y[r]]);for(t.query&&s[y[12]]&&(i[m[0]]=s[m[0]],i[m[1]]=s[m[1]]),r=0;r<u;r++)"."==(n=h[r])?o[a]="":".."==n?o[--a]="":""===n?1<u&&(r||(o[0]=n,a=1),r==u-1&&(o[a]=n)):(o[a]=n,r<u-1&&a++);var f=i[y[9]]=o.slice(0,a+1).join("/"),l=f.split(/\//),p=[f];return i[y[12]]&&p.push("?",i[y[12]]),i[y[13]]&&p.push("#",i[y[13]]),i[y[8]]=p.join(""),i[y[10]]=l.slice(0,l.length-1).join("/")+"/",i[y[11]]=l[l.length-1],i}function l(e,t){var r,n,i,o,a,s,h,u=this[m[0]],f=this[m[1]],l=[],p={};if(t)if((t=""+t).match(/[&=]/))p=v("?"+t).searchKey;else for(r in e)p[r]=t;for(r in e){if(null===(n=e[r]))f[r]=[];else if(Array.isArray(n)||(n=[n]),p[r]){r in f||(f[r]=[]);for(a={},i=0,o=n.length;i<o;i++)a[n[i].toString()]=1;if((t=""+p[r]).match(/add/i))f[r]=f[r].concat(n);else if(t.match(/del/i)){for(h=[],i=0,o=(s=f[r]).length;i<o;i++)a[s[i]]||h.push(s[i]);f[r]=h}else if(t.match(/toggle/i)){for(h=[],i=0,o=(s=f[r]).length;i<o;i++)a[s[i]]?a[s[i]]=2:h.push(s[i]);for(n in a)1==a[n]&&h.push(n);f[r]=h}}else f[r]=n;0===f[r].length?(delete u[r],delete f[r]):u[r]=f[r][f[r].length-1]}for(r in f)for(i=0,o=(n=f[r]).length;i<o;i++)l.push(j(r)+"="+j(n[i]));return this.search=l.join("&"),this}function w(e,t,r){var n=e.data(t);return void 0===n||!1===n||null===n?r:"string"!=typeof n||!n.match(/^(false|off|n|no)$/i)}var n={attr:"href",event:"click change submit",selector:".urlfilter",src:"src"},i=".urlfilter";var t={parse:v,unparse:u,join:f,update:l};"undefined"!=typeof jQuery&&jQuery.extend(jQuery.fn,{urlfilter:function(e){if(0!=this.length){var t=this[0].ownerDocument,p=$.extend({},n,e||{},this.dataset),c=p.remove||w(this,"remove"),r=p.event.split(/\s+/).map(function(e){return e+i}).join(" "),d=p.location||(t.defaultView||t.parentWindow).location,g=p.history||(t.defaultView||t.parentWindow).history;return this.on(r,p.selector,function(e){var i,t=$(this),o=t.data("mode")||p.mode,r=t.data("target")||p.target,n=t.data("src")||p.src,a=w(t,"remove",c);if("change"==e.type||$(e.target).is(":input:not(:button)")){var s=encodeURIComponent(t.attr("id")||t.attr("name")),h=encodeURIComponent(t.val());i="?"+s+"="+h}else if("submit"==e.type||$(e.target).is("form"))e.preventDefault(),i="?"+t.serialize();else{if("click"!=e.type)return;$(e.target).is("a")&&e.preventDefault(),i=t.attr(p.attr)}var u=v(i),f=u.searchList;function l(e){var t=v(e).join(i,{query:!1,hash:!1}).update(f,o);if(a){var r={};for(var n in t.searchKey)""===t.searchKey[n]&&(r[n]=null);t.update(r)}return t.toString()}r?"#"==r?d.hash=l(d.hash.replace(/^#/,"")):r.match(/^pushstate$/i)?g.pushState({},"",l(d.href)):$(r).each(function(){var e=$(this),t=l(e.attr(n));e.attr(n,t).load(t,function(){e.trigger({type:"load",url:t})})}):d.href=l(d.href),t.trigger({type:"urlfilter",url:u})})}}}),e.url=t,e.version="0.16.2",Object.defineProperty(e,"__esModule",{value:!0})});
